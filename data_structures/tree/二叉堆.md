# 堆

二叉堆首先是一个完全二叉树。最大堆（大顶堆）的每一个节点的值都必须大于等于其子树中每个节点的值，最小堆（小顶堆）的每一个节点的值都必须小于等于其子树中每个节点的值。

## 如何实现堆

堆的实现一般使用数组，利用下标之间的关系来表示节点之间的关系。

堆的常用操作：

- 往堆中插入一个元素
- 删除堆顶元素

新插入的元素放到堆的最后，然后进行调整以重新满足堆的特性，这一过程叫做堆化（heapify）。堆化的时间复杂度是 `O(logn)`，所以往堆中插入一个元素和删除堆顶元素的时间复杂度都是 `O(logn)`。

## 堆的应用

- 使用堆这种数据结构实现堆排序
- 优先级队列
- 求 Top K
- 求中位数

### 优先队列与二叉堆

The classic way to implement a priority queue is using a data structure called a binary heap. A binary heap will allow us both enqueue and dequeue items in `O(logn)`.

往优先级队列中插入一个元素，就相当于往堆中插入一个元素。从优先级队列中取出优先级最高的元素，就相当于取出堆顶元素。

优先级队列的应用场景：

- 合并有序小文件
- 高性能定时器（timer）

### 利用堆求 Top K

求 Top K 的问题可以分成两类：

- 针对静态数据集合
- 针对动态数据集合，有数据动态地加入到集合中
