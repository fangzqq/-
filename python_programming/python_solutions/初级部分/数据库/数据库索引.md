# 数据库

## 数据库索引

在数据之外，数据库系统还维护着满足 _特定查找算法的数据结构_，这些数据结构以某种方式引用（指向）数据，这样就可以在这些数据结构上实现高级查找算法。这种数据结构，就是索引。

简而言之，数据库索引本质上是一种 _数据结构_(存储结构+算法)，目的是为了加快目标数据查询/更新的速度。

B+ 树索引


数据库创建索引能够大大提高系统的性能。
第一，通过创建唯一性的索引，可以保证数据库表中每一行数据的唯一性。
第二，可以大大加快数据的检索速度，这也是创建索引的最主要的原因。
第三，可以加速表和表之间的连接，特别是在实现数据的参考完整性方面特别有意义。
第四，在使用 _分组和排序_ 子句进行数据检索时，同样可以显著的减少查询中分组和排序的时间。
第五，通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。

增加索引也有许多不利的方面。
第一，创建索引和维护索引需要消耗时间，这种时间随着数量的增加而增加。
第二，索引需要占物理空间，除了数据表占据数据空间之外，每一个索引还要占一定的物理空间，如果要建立 _聚簇索引_，那么需要额空间就会更大。
第三，当对表中的数据进行增加，删除和修改的时候，索引也要 _动态的维护_，这样就降低了数据的维护速度。


## 建立索引的原则

应该对如下的列建立索引：

- 在作为主键的列上，强制该列的唯一性和组织表中数据的排列结构。
- 在经常用在连接的列上，这些列主要是一些外键，可以加快连接的速度。
- 在经常需要根据范围进行搜索的列上创建索引，因为索引已经排序，其指定的范围是连续的。
- 在经常需要排序的列上创建索引，因为索引已经排序，这样查询可以利用索引的排序，加快排序查询时间。
- 在经常使用在 `where` 子句中的列上面创建索引，加快条件的判断速度。

有些列不应该创建索引:

- 在查询中很少使用或者作为参考的列不应该创建索引。
- 对于那些只有很少数据值的列也不应该增加索引（比如性别，结果集的数据行占了表中数据行的很大比例，即需要在表中搜索的数据行的比例很大。增加索引，并不能明显加快检索速度）。
- 对于那些定义为 `text`，`image` 和 `bit` 数据类型的列不应该增加索引。这是因为，这些列的数据量要么相当大，要么取值很少。
- 当修改性能远远大于检索性能时，不应该创建索引，因为修改性能和检索性能是矛盾的。

## 创建索引的方法

- 直接创建
- 间接创建（在表中定义主键约束或者唯一性约束时，同时也创建了索引）

## 索引的分类

聚簇索引 & 非聚簇索引

- 主键索引
- 唯一性索引
- 复合索引

唯一性索引保证 _在索引列中的全部数据是唯一的_，不会包含冗余数据。复合索引就是 _一个索引创建在两个列或者多个列上_。复合索引可以减少一在一个表中所创建的索引数量。

